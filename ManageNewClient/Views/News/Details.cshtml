@{
    ViewData["Title"] = "News Details";
}

<div class="container">
    <div class="news-details">
        <h1 id="title"></h1>
        <img id="image" src="" alt="News Image">
        <p id="postedDate"></p>
        <p id="createdBy"></p>
        <div id="content"></div>
        <div id="like"></div>
    </div>
</div>

@section Scripts {
    <script>
        // Function to fetch and display the details of a news article
        function fetchNewsDetails() {
            let params = (new URL(document.location)).searchParams;
            let articleId = params.get("id");
            console.log(articleId)
            // Make an AJAX GET request to fetch the article details
            $.ajax({
                url: `https://localhost:7255/api/News/GetById/id?id=${articleId}`,
                type: "GET",
                dataType: "json",
                success: function (data) {
                    // Populate the HTML elements with the fetched data
                    $("#title").text(data.title);
                    $("#image").attr("src", data.imgPath);
                    $("#postedDate").text(`Posted Date: ${data.postedDate}`);
                    $("#content").html(data.content);
                    $("#createdBy").text(`Created By: ${data.createdBy}`);
                    $("#like").text(`Like: ${data.numberOfLikes}`);
                },
                error: function (error) {
                    console.error("Error fetching news article details:", error);
                }
            });
        }

        // Call the function to fetch and display news article details
        fetchNewsDetails();
    </script>
}
